# v1构架

## 0.其他软件分析
### 1.COMSOL
有modeling wizard   
PDE解法pipeline:  
* wizard
* 选择pde project模版（可以选择两种通用的pde form）
* 选择Geometry：cad模式
* 确定方程形式
    * 选择方程参数
    * 按边界确定边界条件

### 2.CAD/webGL
https://zhuanlan.zhihu.com/p/346246200 这里有cad绘图的技术介绍  

查看和编辑的逻辑实际上是绑定的：如果支持查看，就需要导入文件，那么为什么不在平台里实现这个文件编辑？



### 3.Q&A

同时我们的边界，不一定要用绘图的方式，也可以支持直接用公式
>绘图 or 公式 or DSL  
实际上，用参数化的编程语言描述一个不复杂的几何模型，是极好的一个选择！  
语言要注意随时维护对象的各种属性，尤其重要的是表面（对应边界）
直接放弃使用绘图的方式创建计算域，因为是天坑！不用去考虑导入cad等等复杂操作  

那么图形编辑器的页面：
> 和代码编辑器一致



用公式和用绘图两个方式要不要统一？
> 要统一，因为最后用来计算的都是公式化后的边界  
但是这个算法未知，应该很难！而且如果不限制绘图类型，理论上来说对应公式的复杂度应该没边了。  
所以我们统一，就只能有几种种基础类型和操作：（直线，点矩，等等，不知道有没有这种计算域）矩形，圆形，3d拉伸（先不加3d）；如果是公式，非图形操作，则可以规定更复杂的  
还有就是不光是要绘图，还要可以选中图的元素，


2d和3d要不要分开呢？
>分开渲染！  
目前打算先实现2d的渲染，有时间再去搞3d的。同时，2d和3d可视化由于需求和画风不同，底层逻辑也不同，适合采用分离的渲染引擎  
不过语言可以建一致的接口！这样就可以在代码编辑器里直接预配置图形的渲染方案了。

到底使用什么可视化引擎呢？
>和comsol一样的风格  
使用three.js引擎，基于此开发的案例有很多  
对于2d，就用d3.js


除此之外，还有单独的charts图！如plot图等等，分析某一项数据，比如2d的切片数据；
除此之外，给出数据table（如果需要）

图形tab需要一个控制的bar，一个数据结果专用的tab

所以怎么保存project呢
>那我们就可以直接保存代码文件啦！保存几个点：
>* 计算域的代码文件（可以是转译后的）
>* tf/pytorch训练数据，
>* 训练后缓存数据？（待定）  
>所以我们是一定要一个project tab的！


### 2.设计方案
借鉴online IDE的固定页面设计
comsol的建模专属UI

## 1.方程构建
涉及两个内容，一个是方程式的处理，一个是定制的流程
